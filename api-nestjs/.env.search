# Search & Discovery Environment Configuration

# ============================================================================
# ELASTICSEARCH CONFIGURATION
# ============================================================================

# Elasticsearch cluster endpoints
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_NODES=http://localhost:9200,http://localhost:9201,http://localhost:9202

# Authentication (if enabled)
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# Index configuration
ELASTICSEARCH_INDEX_PREFIX=marketplace_prod
ELASTICSEARCH_API_VERSION=8.11

# Connection settings
ELASTICSEARCH_MAX_RETRIES=3
ELASTICSEARCH_REQUEST_TIMEOUT=30000
ELASTICSEARCH_PING_TIMEOUT=3000
ELASTICSEARCH_SNIFF_ON_START=true
ELASTICSEARCH_SNIFF_INTERVAL=300000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis Sentinel (for high availability)
REDIS_SENTINEL_ENABLED=false
REDIS_SENTINEL_HOSTS=localhost:26379,localhost:26380,localhost:26381
REDIS_SENTINEL_MASTER_NAME=mymaster

# Redis cluster (if using cluster mode)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=localhost:7000,localhost:7001,localhost:7002

# Connection pool settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000

# ============================================================================
# SEARCH CONFIGURATION
# ============================================================================

# Search behavior
SEARCH_DEFAULT_SIZE=20
SEARCH_MAX_SIZE=100
SEARCH_MAX_FROM=10000
SEARCH_AUTOCOMPLETE_SIZE=10
SEARCH_FACET_SIZE=50

# Performance settings
SEARCH_BULK_SIZE=1000
SEARCH_SCROLL_SIZE=5000
SEARCH_SCROLL_TIMEOUT=5m
SEARCH_REQUEST_TIMEOUT=30000

# Cache settings
SEARCH_CACHE_TTL=300
SEARCH_FACETS_CACHE_TTL=600
SEARCH_AUTOCOMPLETE_CACHE_TTL=3600
SEARCH_POPULAR_QUERIES_CACHE_TTL=1800

# ============================================================================
# ANALYTICS CONFIGURATION
# ============================================================================

# Analytics features
SEARCH_ANALYTICS_ENABLED=true
SEARCH_TRACK_SEARCHES=true
SEARCH_TRACK_CLICKS=true
SEARCH_TRACK_CONVERSIONS=true

# Analytics processing
SEARCH_ANALYTICS_BATCH_SIZE=100
SEARCH_ANALYTICS_FLUSH_INTERVAL=30000
SEARCH_ANALYTICS_RETENTION_DAYS=90

# ============================================================================
# PERSONALIZATION CONFIGURATION
# ============================================================================

# Personalization features
SEARCH_PERSONALIZATION_ENABLED=true
SEARCH_USER_HISTORY_DAYS=90
SEARCH_COLLABORATIVE_FILTERING=true
SEARCH_CONTENT_BASED_FILTERING=true
SEARCH_MIN_INTERACTIONS=5

# ============================================================================
# POPULARITY & TRENDING
# ============================================================================

# Popularity scoring weights
SEARCH_POPULARITY_ORDERS_WEIGHT=0.4
SEARCH_POPULARITY_REVIEWS_WEIGHT=0.2
SEARCH_POPULARITY_RATING_WEIGHT=0.2
SEARCH_POPULARITY_VIEWS_WEIGHT=0.1
SEARCH_POPULARITY_FRESHNESS_WEIGHT=0.1

# Trending settings
SEARCH_TRENDING_PERIOD_DAYS=7
SEARCH_MIN_ORDERS_FOR_TRENDING=5
SEARCH_POPULARITY_DECAY_FACTOR=0.95

# ============================================================================
# BUSINESS RULES
# ============================================================================

# Boost factors
SEARCH_BOOST_FEATURED_PRODUCTS=1.5
SEARCH_BOOST_PROMOTED_PRODUCTS=1.3
SEARCH_BOOST_VERIFIED_SELLERS=1.2
SEARCH_BOOST_HIGH_RATED_PRODUCTS=1.1

# Penalty factors
SEARCH_PENALTY_OUT_OF_STOCK=0.8
SEARCH_PENALTY_LOW_RATED=0.9

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Search features
SEARCH_SPELL_CORRECTION=true
SEARCH_AUTOCOMPLETE=true
SEARCH_FACETED_SEARCH=true
SEARCH_GEO_SEARCH=false
SEARCH_VISUAL_SEARCH=false
SEARCH_VOICE_SEARCH=false
SEARCH_ML_RECOMMENDATIONS=false

# ============================================================================
# RATE LIMITING
# ============================================================================

# API rate limits
SEARCH_REQUESTS_PER_MINUTE=100
SEARCH_AUTOCOMPLETE_REQUESTS_PER_MINUTE=200
SEARCH_REINDEX_REQUESTS_PER_HOUR=10

# ============================================================================
# MONITORING & ALERTING
# ============================================================================

# Performance thresholds
SEARCH_SLOW_QUERY_THRESHOLD=1000
SEARCH_ERROR_RATE_THRESHOLD=0.05
SEARCH_AVAILABILITY_THRESHOLD=0.99
SEARCH_INDEX_SIZE_ALERT_THRESHOLD=10GB

# Health check settings
SEARCH_HEALTH_CHECK_INTERVAL=30000
SEARCH_HEALTH_CHECK_TIMEOUT=5000

# ============================================================================
# LOCALIZATION
# ============================================================================

# Language settings
SEARCH_DEFAULT_LOCALE=en-IN
SEARCH_SUPPORTED_LOCALES=en-IN,hi-IN,ta-IN,te-IN
SEARCH_FALLBACK_LOCALE=en-IN

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================

# Debug settings
SEARCH_DEBUG_QUERIES=false
SEARCH_LOG_SLOW_QUERIES=true
SEARCH_LOG_LEVEL=info

# Development features
SEARCH_MOCK_ANALYTICS=false
SEARCH_MOCK_RECOMMENDATIONS=false
SEARCH_DISABLE_CACHE=false

# ============================================================================
# SECURITY
# ============================================================================

# Input validation
SEARCH_MAX_QUERY_LENGTH=200
SEARCH_SANITIZE_QUERIES=true
SEARCH_BLOCK_SCRIPT_INJECTION=true

# Access control
SEARCH_REQUIRE_AUTH_FOR_ANALYTICS=true
SEARCH_REQUIRE_AUTH_FOR_REINDEX=true
SEARCH_ADMIN_ONLY_ENDPOINTS=true